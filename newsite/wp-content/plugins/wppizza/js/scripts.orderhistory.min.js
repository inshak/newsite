jQuery(document).ready(function(p){var d,s,n=p(".wppizza-admin-orders"),a=p(".wppizza-admin-orders-attributes"),t=0<n.length,u=1e3*wppizza.aopt;t&&(d=function(){var r,t=n.attr("id").split("-").pop(-1),e=a.val(),o=JSON.parse(e);void 0!==o.audio_notify&&(r=new Audio(o.audio_notify)),n.prepend('<div class="wppizza-loading"></div>'),jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"admin-order-history",post_id:t,atts:e}},function(t){console.log("orders polling"),void 0!==t.notify&&r.play(),n.html(t.html)},"json").error(function(t,r,e){alert("error[print] : "+e)})},s=setInterval(d,u),p(document).on("change",".wppizza-admin_orderhistory-order-status",function(t){clearInterval(s);var r=p(this),e=r.attr("id").split("-").pop(-1),o=r.val(),n=!1,a=e.split("_");jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"admin-change-status",uoKey:e,status:o}},function(t){return void 0!==t.update_prohibited?(alert(t.update_prohibited),void(n=!0)):(d(),void(void 0!==t.orderstatus_change_alert&&""!=t.orderstatus_change_alert&&alert(t.orderstatus_change_alert)))},"json").error(function(t,r,e){alert("error[status] : "+e)}).done(function(){n||function(t,r,e,o,n){if(0<t.length)for(i=0;i<t.length;i++)new Function("self, blog_id, order_id, status","return "+t[i]+"(self, blog_id, order_id, status);")(r,e,o,n)}(wppizza.fnOrderStatusChange,r,a[0],a[1],o),s=setInterval(d,u)})}),p(document).on("click",".wppizza-order-print, .wppizza-order-view",function(t){var r=p(this),e=r.attr("id").split("-").pop(-1),o=!!r.hasClass("wppizza-order-print");jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"admin-view-order",uoKey:e}},function(t){var r,e=window.open("","WppizzaOrder","width="+t["window-width"]+",height="+t["window-height"]);null!=e&&void 0!==e?(e.document.open("text/html","replace"),"text/plain"==t["content-type"]?(r=t.markup.plaintext,e.document.write("<pre>"+r+"</pre>")):(r=t.markup.html,e.document.write(r)),e.focus(),o&&e.print()):alert("You must turn off your pop-up blocker to enable printing.\n\nPlease consult your device manufacturer about how to turn off pop-up blocking for this site.\n\n")},"json").error(function(t,r,e){alert("error[view/print] : "+e)})}),p(document).on("click",".wppizza-order-delete",function(t){var r=p(this);if(!confirm(r.attr("title")+"?"))return!1;var e=r.attr("id").split("-").pop(-1);jQuery.post(wppizza.ajaxurl,{action:"wppizza_json",vars:{type:"admin-delete-order",uoKey:e}},function(t){void 0===t.update_prohibited?void 0!==t.success&&(r.closest("tr").empty().remove(),alert(t.success)):alert(t.update_prohibited)},"json").error(function(t,r,e){alert("error[delete order] : "+e)})}))});